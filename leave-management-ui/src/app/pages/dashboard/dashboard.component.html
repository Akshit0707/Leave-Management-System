<!-- Quick Actions Section (visible to all) -->
<div style="margin: 32px 0; display: flex; gap: 24px; flex-wrap: wrap; justify-content: center;">
  <mat-card class="mat-elevation-z2" style="min-width: 260px; max-width: 320px; flex: 1;">
    <mat-card-title>Quick Actions</mat-card-title>
    <mat-card-content>
      <div style="display: flex; flex-direction: column; gap: 16px;">
        <button mat-raised-button color="primary" routerLink="/create-leave" *ngIf="!isManager">Request Leave</button>
        <button mat-raised-button color="accent" routerLink="/my-leaves" *ngIf="!isManager">View My Leaves</button>
        <button mat-raised-button color="primary" routerLink="/pending-leaves" *ngIf="isManager">Review Pending Leaves</button>
        <button mat-raised-button color="accent" routerLink="/dashboard">Refresh Dashboard</button>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Recent Activity (placeholder, can be replaced with real data) -->
  <mat-card class="mat-elevation-z2" style="min-width: 260px; max-width: 420px; flex: 2;">
    <mat-card-title>Recent Activity</mat-card-title>
    <mat-card-content>
      <mat-list>
        <mat-list-item *ngIf="isManager">
          <mat-icon matListIcon color="primary">supervisor_account</mat-icon>
          <div matLine>Reviewed leave requests</div>
          <div matLine class="mat-caption">Today, 10:00 AM</div>
        </mat-list-item>
        <mat-list-item *ngIf="!isManager">
          <mat-icon matListIcon color="primary">event_note</mat-icon>
          <div matLine>Requested leave for next week</div>
          <div matLine class="mat-caption">Yesterday, 4:30 PM</div>
        </mat-list-item>
        <mat-list-item>
          <mat-icon matListIcon color="accent">update</mat-icon>
          <div matLine>Dashboard updated</div>
          <div matLine class="mat-caption">Just now</div>
        </mat-list-item>
      </mat-list>
    </mat-card-content>
  </mat-card>
</div>

<!-- Manager Dashboard -->
<ng-container *ngIf="isManager">
  <mat-toolbar color="primary" class="mat-elevation-z2">
    <span>Welcome Back, {{ userName }}</span>
    <span class="spacer"></span>
    <span class="role-tag manager">Manager</span>
  </mat-toolbar>
  <div style="margin: 32px 0;">
    <mat-card class="mat-elevation-z4">
      <mat-card-title>Pending Leave Approvals</mat-card-title>
      <mat-card-content>
        <app-pending-leaves></app-pending-leaves>
      </mat-card-content>
    </mat-card>
  </div>
</ng-container>

<!-- Employee Dashboard -->
<ng-container *ngIf="!isManager">
  <mat-toolbar color="primary" class="mat-elevation-z2">
    <span>Welcome Back, {{ userName }}</span>
    <span class="spacer"></span>
    <span class="role-tag employee">Employee</span>
  </mat-toolbar>
  <div style="margin: 32px 0;">
    <mat-card class="mat-elevation-z4">
      <mat-card-title>Leave Statistics</mat-card-title>
      <mat-card-content>
        <div *ngIf="isLoading" style="display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 200px;">
          <mat-progress-spinner mode="indeterminate" color="primary"></mat-progress-spinner>
          <p style="margin-top: 16px;">Loading your statistics...</p>
        </div>
        <div *ngIf="!isLoading">
          <mat-grid-list cols="3" rowHeight="120px" gutterSize="24px">
            <mat-grid-tile>
              <mat-card class="stat-card">
                <mat-card-header>
                  <mat-icon color="primary">assignment</mat-icon>
                  <span>Total Requests</span>
                </mat-card-header>
                <mat-card-content>
                  <h2>{{ summary.totalRequests }}</h2>
                </mat-card-content>
              </mat-card>
            </mat-grid-tile>
            <mat-grid-tile>
              <mat-card class="stat-card">
                <mat-card-header>
                  <mat-icon color="primary">check_circle</mat-icon>
                  <span>Approved</span>
                </mat-card-header>
                <mat-card-content>
                  <h2>{{ summary.approvedRequests }}</h2>
                </mat-card-content>
              </mat-card>
            </mat-grid-tile>
            <mat-grid-tile>
              <mat-card class="stat-card">
                <mat-card-header>
                  <mat-icon color="primary">hourglass_empty</mat-icon>
                  <span>Pending</span>
                </mat-card-header>
                <mat-card-content>
                  <h2>{{ summary.pendingRequests }}</h2>
                </mat-card-content>
              </mat-card>
            </mat-grid-tile>
            <mat-grid-tile>
              <mat-card class="stat-card">
                <mat-card-header>
                  <mat-icon color="warn">cancel</mat-icon>
                  <span>Rejected</span>
                </mat-card-header>
                <mat-card-content>
                  <h2>{{ summary.rejectedRequests }}</h2>
                </mat-card-content>
              </mat-card>
            </mat-grid-tile>
            <mat-grid-tile>
              <mat-card class="stat-card">
                <mat-card-header>
                  <mat-icon color="accent">event</mat-icon>
                  <span>Days Requested</span>
                </mat-card-header>
                <mat-card-content>
                  <h2>{{ summary.totalDaysRequested }}</h2>
                </mat-card-content>
              </mat-card>
            </mat-grid-tile>
            <mat-grid-tile>
              <mat-card class="stat-card">
                <mat-card-header>
                  <mat-icon color="accent">event_available</mat-icon>
                  <span>Days Approved</span>
                </mat-card-header>
                <mat-card-content>
                  <h2>{{ summary.totalDaysApproved }}</h2>
                </mat-card-content>
              </mat-card>
            </mat-grid-tile>
          </mat-grid-list>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</ng-container>