<app-navbar></app-navbar>

<div class="register-container">
  <div class="register-card">
    <h2>Create your account</h2>

    <form (ngSubmit)="register()" autocomplete="off">

      <div class="form-row">
        <app-form-field
          [label]="'First Name'"
          [type]="'text'"
          [placeholder]="'Enter your first name'"
          [required]="true"
          [control]="firstNameControl"
          [error]="firstNameError">
        </app-form-field>

        <app-form-field
          [label]="'Last Name'"
          [type]="'text'"
          [placeholder]="'Enter your last name'"
          [required]="true"
          [control]="lastNameControl"
          [error]="lastNameError">
        </app-form-field>
      </div>

      <app-form-field
        [label]="'Email'"
        [type]="'email'"
        [placeholder]="'Enter your email'"
        [required]="true"
        [control]="emailControl"
        [error]="emailError">
      </app-form-field>

      <app-form-field
        [label]="'Password'"
        [type]="'password'"
        [placeholder]="'Enter your password (min 6 characters)'"
        [required]="true"
        [control]="passwordControl"
        [error]="passwordError">
      </app-form-field>

      <app-form-field
        [label]="'Confirm Password'"
        [type]="'password'"
        [placeholder]="'Confirm your password'"
        [required]="true"
        [control]="confirmPasswordControl"
        [error]="confirmPasswordError">
      </app-form-field>

      <div class="form-row">
        <div class="form-group">
          <label for="role">Role: <span class="required">*</span></label>
          <select
            id="role"
            name="role"
            [(ngModel)]="role"
            (change)="onRoleChange()"
            required>
            <option value="Employee">Employee</option>
            <option value="Manager">Manager</option>
          </select>
        </div>

        <div class="form-group" *ngIf="role === 'Employee'">
          <label for="managerId">Select Manager:</label>
          <select
            id="managerId"
            name="managerId"
            [(ngModel)]="managerId">
            <option [ngValue]="null">-- No Manager --</option>
            <option *ngFor="let m of managers" [ngValue]="m.id">
              {{ m.name }} ({{ m.email }})
            </option>
          </select>
          <small class="help-text">Select your manager if available</small>
        </div>
      </div>

      <!-- âœ… CENTERED REGISTER BUTTON -->
      <div class="register-btn-wrapper">
        <app-error-message [error]="error"></app-error-message>

        <button
          mat-raised-button
          color="primary"
          type="submit"
          [disabled]="isLoading"
          class="register-btn">
          {{ isLoading ? 'Registering...' : 'Register' }}
        </button>
      </div>

      <div class="login-link">
        Already have an account?
        <a routerLink="/login" class="login-btn btn" style="margin-left: 0.5rem;">
          Login
        </a>
      </div>

    </form>
  </div>
</div>
